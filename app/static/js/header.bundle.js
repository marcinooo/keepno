"use strict";(self.webpackChunkfrontend_scripts=self.webpackChunkfrontend_scripts||[]).push([[19],{371:(e,n,t)=>{var o=t(114),r=t(648);window.addEventListener("load",(function(){var e=document.querySelector("#notes"),n=document.querySelector("#notesTemplate"),t=document.querySelector("#notesLoadingSpiner"),c=document.getElementById("addNoteForm"),i=new bootstrap.Modal(document.getElementById("addNoteModal")),d=1,a=!0,s=new Event("loadNotesAfterPageOpeningEvent");function l(e,n){return e.querySelector("#noteTitle").innerHTML=n.title,e.querySelector("#noteDescription").innerHTML=n.description,e.querySelector("#noteDate").innerHTML=n.updated,e.querySelector("#noteLink").href="/notes/".concat(n.id),e}function u(e,n,t){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=n.content.cloneNode(!0);l(c,e);var i=c.querySelector("#noteLink");if(o){var d=(0,r.e)();d==e.id&&(i.style.background="rgb(233, 233, 233)")}t.appendChild(c)}function f(o){for(var r=0;r<o.notes.length;r++)u(o.notes[r],n,e);o.has_next?(d=o.next_num,a=!0):(a=!1,t.style.display="none")}var h=new IntersectionObserver((function(e){e[0].intersectionRatio<=0||a&&fetch("/api/notes?npage=".concat(d)).then((function(e){return e.json()})).then((function(e){f(e)})).catch((function(e){console.log(e),o.Z.error("There was a problem. Notes couldn't be downloaded.")}))}));document.addEventListener("loadNotesAfterPageOpeningEvent",(function(e){a&&fetch("/api/notes?npage=".concat(d)).then((function(e){return e.json()})).then((function(e){var n;f(e),(n=document.getElementById("sidebarBody")).scrollHeight>n.clientHeight?h.observe(t):document.dispatchEvent(s)})).catch((function(e){console.log(e),o.Z.error("There was a problem. Notes couldn't be downloaded.")}))})),c.addEventListener("submit",(function(t){t.preventDefault();var c=document.querySelector("#newNoteTitle").value,d=document.querySelector("#newNoteDescription").value;fetch("/api/notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:c,description:d})}).then((function(e){return e.json()})).then((function(t){if(t.note)i.hide(),d=t.note,a=e,s=l(s=n.content.cloneNode(!0),d),a.insertBefore(s,a.firstChild.nextSibling),o.Z.success("New note has been added successfully!");else{var c=(0,r.T)(t.error,"Your note was not added:<br/>");o.Z.error(c)}var d,a,s})).catch((function(e){console.log(e),o.Z.error("There was a problem. The note was not added!")}))})),document.dispatchEvent(s)}))}},e=>{e.O(0,[493,957],(()=>(371,e(e.s=371)))),e.O()}]);