"use strict";(self.webpackChunkfrontend_scripts=self.webpackChunkfrontend_scripts||[]).push([[266],{215:(e,o,t)=>{var n=t(114);window.addEventListener("load",(function(){var e=document.querySelector("#collapseProgress"),o=document.querySelector("#collapseResult"),t=document.querySelector("#downloadLink"),r=document.querySelector("#generateButton"),s=document.querySelector("#progressBar"),c=new bootstrap.Collapse(e,{toggle:!1}),a=new bootstrap.Collapse(o,{toggle:!1});function u(e){fetch(e).then((function(e){return e.json()})).then((function(o){s.style.width="".concat(o.progress,"%"),"PROGRESS"===o.status?setTimeout(u,500,e):"SUCCESS"===o.status?(t.href=o.result,a.show(),c.hide(),r.disabled=!1,n.Z.success("Note has been generated successfully!")):(c.hide(),r.disabled=!1,n.Z.error("There was a problem. Your note has been not dumped to PDF!"))})).catch((function(e){console.log(e),n.Z.error("There was a problem. Your note has been not dumped to PDF!")}))}r.addEventListener("click",(function(e){r.disabled=!0,c.show(),fetch("/api/notes/".concat("{{ note.id }}","/export/pdf"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(console.log(e),"started"==e.report_status)u("/api/task/".concat(e.task_id));else{var o="Your note has been not dumped to PDF:<br/><ul><li>".concat(e.error,"</li></ul>");n.Z.error(o)}})).catch((function(e){console.log(e),n.Z.error("There was a problem. Your note has been not dumped to PDF!")}))}))}))}},e=>{e.O(0,[957],(()=>(215,e(e.s=215)))),e.O()}]);